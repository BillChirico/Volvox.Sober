# Volvox.Sober

> A universal Expo application for sobriety support and recovery through authentic peer accountability

[![TypeScript](https://img.shields.io/badge/TypeScript-5.x-blue.svg)](https://www.typescriptlang.org/)
[![Expo](https://img.shields.io/badge/Expo-54.x-000020.svg)](https://expo.dev/)
[![React Native](https://img.shields.io/badge/React%20Native-0.81+-61DAFB.svg)](https://reactnative.dev/)
[![Supabase](https://img.shields.io/badge/Supabase-Backend-3ECF8E.svg)](https://supabase.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## Overview

Volvox.Sober is a sobriety companion app that connects individuals in recovery with experienced mentors through intelligent sponsor/sponsee matching. The platform combines structured 12-step AA worksheets, real-time messaging, and mutual sobriety tracking to foster authentic accountability and support.

### Core Features

- **ğŸ¤ Intelligent Matching**: SQL-based algorithm connecting sponsors with compatible sponsees
- **ğŸ“ 12-Step Worksheets**: Structured step work with sponsor editing capabilities
- **ğŸ’¬ Real-time Messaging**: Supabase Realtime subscriptions for instant communication
- **ğŸ“Š Sobriety Tracking**: Full mutual visibility between sponsors and sponsees
- **ğŸ”” Smart Notifications**: Edge Functions with pg_cron scheduling
- **ğŸ”’ Privacy First**: Row Level Security (RLS) for data protection

## Tech Stack

### Frontend

- **Expo 54.x** - Universal app platform (iOS, Android, Web)
- **Expo Router 4.x** - File-based routing (like Next.js)
- **React Native 0.81+** - Cross-platform native framework
- **TypeScript 5.x** - Type-safe development
- **Redux Toolkit** - State management
- **React Native Paper** - Material Design components
- **Yup** - Form validation

### Backend

- **Supabase** - Backend-as-a-Service
- **PostgreSQL 15+** - Database with RLS
- **Supabase Auth** - Authentication (GoTrue)
- **Edge Functions** - Serverless functions (Deno runtime)
- **Realtime** - WebSocket subscriptions

### Testing

- **Jest** - Unit and integration tests
- **React Native Testing Library** - Component testing
- **Playwright** - End-to-end testing
- **80%+ coverage target** - Business logic

## Getting Started

### Prerequisites

- Node.js 18.0.0 or higher
- pnpm 8.0.0 or higher
- Expo CLI (installed automatically)
- iOS: Xcode 14+ (macOS only)
- Android: Android Studio + SDK 33+
- Web: Modern browser (Chrome, Firefox, Safari, Edge)

### Installation

```bash
# Clone the repository
git clone https://github.com/BillChirico/Volvox.Sober.git
cd Volvox.Sober

# Install dependencies
pnpm install

# Copy environment variables
cp .env.example .env
# Edit .env with your Supabase credentials
```

### Development

```bash
# Start Expo dev server (choose platform from menu)
pnpm start

# Or run specific platforms:
pnpm ios          # Run on iOS simulator/device
pnpm android      # Run on Android emulator/device
pnpm web          # Run in web browser
```

### Quality Checks

```bash
# Run all tests
pnpm test

# Type checking
pnpm typecheck

# Linting
pnpm lint
pnpm lint:fix

# Code formatting
pnpm format
```

## Project Structure

```
volvox-sober/
â”œâ”€â”€ app/                 # Expo Router file-based routing
â”‚   â”œâ”€â”€ (tabs)/          # Tab navigator group
â”‚   â”œâ”€â”€ (auth)/          # Auth screens group
â”‚   â”œâ”€â”€ (onboarding)/    # Onboarding screens group
â”‚   â”œâ”€â”€ _layout.tsx      # Root layout
â”‚   â”œâ”€â”€ index.tsx        # Entry route
â”‚   â””â”€â”€ +not-found.tsx   # 404 page
â”‚
â”œâ”€â”€ src/                 # Application source code
â”‚   â”œâ”€â”€ components/      # Reusable UI components
â”‚   â”œâ”€â”€ services/        # API clients, business logic
â”‚   â”œâ”€â”€ store/           # State management (Redux)
â”‚   â”œâ”€â”€ types/           # TypeScript definitions
â”‚   â”œâ”€â”€ hooks/           # Custom React hooks
â”‚   â”œâ”€â”€ theme/           # Theme and styling
â”‚   â”œâ”€â”€ constants/       # App constants (Colors, Layout)
â”‚   â””â”€â”€ utils/           # Utility functions
â”‚
â”œâ”€â”€ __tests__/           # Test files
â”œâ”€â”€ assets/              # Images, fonts, static resources
â”œâ”€â”€ ios/                 # iOS native code (generated by Expo)
â”œâ”€â”€ android/             # Android native code (generated by Expo)
â”œâ”€â”€ web/                 # Web-specific code and configuration
â”œâ”€â”€ e2e/                 # End-to-end tests (Detox)
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared/          # Shared types and utilities
â”œâ”€â”€ supabase/            # Backend (migrations, functions, seeds)
â”œâ”€â”€ specs/               # Feature specifications & planning
â”œâ”€â”€ scripts/             # Build and utility scripts
â”œâ”€â”€ docs/                # Project documentation
â””â”€â”€ [config files]       # App configuration (app.json, tsconfig, etc.)
```

### Platform-Specific Code

Expo supports platform-specific files using extensions:

- `Component.tsx` - Shared across all platforms
- `Component.ios.tsx` - iOS-specific override
- `Component.android.tsx` - Android-specific override
- `Component.web.tsx` - Web-specific override

## Development Workflow

1. Create feature branch from `main`
2. Follow TDD approach (write tests first)
3. Implement feature with TypeScript strict mode
4. Run quality checks: `pnpm test && pnpm typecheck && pnpm lint`
5. Commit with conventional commits (feat:, fix:, docs:, etc.)
6. Create pull request for review

## Documentation

- **CLAUDE.md** - Development guidelines and coding standards
- **specs/** - Feature specifications and implementation plans
- **docs/** - Additional technical documentation

## Current Status

**Phase 10 - Polish & Cross-Cutting Concerns** (Final Phase)

### Completed Features

- âœ… Authentication system (login, signup, email verification)
- âœ… Onboarding flow (welcome, role selection, profile setup)
- âœ… Main app screens (connections, matches, messages, sobriety tracking, profile)
- âœ… Real-time messaging with Supabase subscriptions
- âœ… Profile management with role switching (sponsor/sponsee)
- âœ… Settings screens (notifications, theme, account)
- âœ… Dark mode with Material Design 3 theming
- âœ… Accessibility compliance (WCAG 2.1 AA)
- âœ… Comprehensive E2E test coverage (Playwright)
- âœ… Performance optimizations (image lazy loading, list virtualization)
- âœ… Error handling and network indicators

### Architecture

- **Routing**: Expo Router 4.x (file-based routing)
- **State Management**: Redux Toolkit + Redux Persist
- **UI Framework**: React Native Paper (Material Design 3)
- **Backend**: Supabase (PostgreSQL, Auth, Realtime, Edge Functions)
- **Testing**: Jest (unit) + Playwright (E2E)

**Note**: All screen components now reside in `app/` directory using Expo Router. The old `src/screens/` directory has been removed.

## Contributing

This is currently a private project. Contribution guidelines will be published when the project becomes open-source.

## License

[MIT License](LICENSE)

## Contact

Project maintained by [Bill Chirico](https://github.com/BillChirico)

---

**Note**: This project is under active development. Features and documentation are subject to change.
